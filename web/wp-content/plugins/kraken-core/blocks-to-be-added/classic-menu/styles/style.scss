//mixins will be included under breakpoint classes below
@mixin desktop-only-styles {
	&.subnav-display-hover {
		.menu-item {
			&:focus,
			&:focus-within,
			&:hover {
				.sub-menu-toggle {
					transform: rotate(180deg);
				}
				.sub-menu {
					display: block;
				}
			}
		}
	}

	&.subnav-display-toggle-click,
	&.subnav-display-click {
		.menu-item {
			&.is-toggled {
				.sub-menu-toggle {
					transform: rotate(180deg);
				}
				.sub-menu {
					display: block;
				}
			}
		}
	}
}

@mixin mobile-only-styles {
	.menu-item {
		& > .menu-item-link {
			flex: 1;
		}
		.sub-menu-toggle {
			display: flex;
			height: 3rem;
			position: absolute;
			top: 0;
			right: 0;
		}
		&.is-toggled {
			.sub-menu-toggle {
				transform: rotate(180deg);
			}
			.sub-menu {
				display: block;
			}
		}
	}
}

.#{$block-prefix}-classic-menu {
	justify-content: var(--classic-menu--justify);
	> ul {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		gap: var(--classic-menu--gap);
		list-style: none;
		margin: 0;
		padding: 0;
	}
	&.is-nowrap {
		> ul {
			flex-wrap: nowrap;
		}
	}
	&.is-horizontal {
		&.is-content-justification-left {
			> ul {
				justify-content: flex-start;
			}
		}
		&.is-content-justification-center {
			> ul {
				justify-content: center;
			}
		}
		&.is-content-justification-right {
			> ul {
				justify-content: flex-end;
			}
		}
		&.is-content-justification-space-between {
			> ul {
				justify-content: space-between;
			}
		}
		&.vertical-align-center,
		&.vertical-align-stretch {
			> ul {
				align-items: center;
			}
		}
		&.vertical-align-top {
			> ul {
				align-items: flex-start;
			}
		}
		&.vertical-align-bottom {
			> ul {
				align-items: flex-end;
			}
		}
		&.link-equal-height {
			> ul {
				align-items: stretch;
				> li > a {
					display: flex;
					height: 100%;
				}
			}
			&.vertical-align-center,
			&.vertical-align-stretch {
				> ul {
					> li > a {
						align-items: center;
					}
				}
			}
			&.vertical-align-top {
				> ul {
					> li > a {
						align-items: flex-start;
					}
				}
			}
			&.vertical-align-bottom {
				> ul {
					> li > a {
						align-items: flex-end;
					}
				}
			}
		}
		.sub-menu {
			top: 100%;
			position: absolute;
			z-index: 88;
		}
	}
	&.is-vertical {
		> ul {
			flex-direction: column;
			align-items: stretch;
			width: 100%;
		}
	}

	p {
		margin: 0;
	}

	&:not(.subnav-display-visible) {
		.sub-menu {
			display: none;
		}
	}

	.menu-item {
		position: relative;

		.menu-item-link {
			flex: 1;
			display: flex;
			flex-wrap: wrap;
			justify-content: space-between;
			align-items: center;
			gap: 0;
			padding-top: var(--classic-menu--link_padding_top);
			padding-right: var(--classic-menu--link_padding_right);
			padding-bottom: var(--classic-menu--link_padding_bottom);
			padding-left: var(--classic-menu--link_padding_left);
			position: relative;
			text-decoration: none;
			transition: color 0.25s ease;
		}

		.menu-item-label {
			display: block;
		}

		.sub-menu {
			list-style: none;
			padding: 0;
			margin: 0;
			text-align: var(--classic-menu--subnav_text_align);
			background-color: var(--classic-menu--subnav_background_color);
			padding-top: var(--classic-menu--subnav_padding_top);
			padding-right: var(--classic-menu--subnav_padding_right);
			padding-bottom: var(--classic-menu--subnav_padding_bottom);
			padding-left: var(--classic-menu--subnav_padding_left);
			a {
				flex: 1;
				color: var(--classic-menu--subnav_text_color);
				padding-top: var(--classic-menu--subnav_link_padding_top);
				padding-right: var(--classic-menu--subnav_link_padding_right);
				padding-bottom: var(--classic-menu--subnav_link_padding_bottom);
				padding-left: var(--classic-menu--subnav_link_padding_left);
			}
		}

		.sub-menu-toggle {
			background-color: transparent;
			border: none;
			flex: 0 0 3rem;
			display: none;
			align-items: center;
			justify-content: center;
			padding: 0;
			stroke: currentColor;
			height: 100%;
			width: 3rem;
			@include standard-transition;
		}

		&.show-sub-menu-toggle {
			.sub-menu-toggle {
				display: flex;
			}
		}
	}

	&.mobile-breakpoint-disabled {
		@include desktop-only-styles();
	}

	&.mobile-breakpoint-xl {
		@include screen-xl-min {
			@include desktop-only-styles();
		}
		@include screen-xl-max {
			@include mobile-only-styles();
		}
	}

	&.mobile-breakpoint-lg {
		@include screen-lg-min {
			@include desktop-only-styles();
		}
		@include screen-lg-max {
			@include mobile-only-styles();
		}
	}

	&.mobile-breakpoint-md {
		@include screen-md-min {
			@include desktop-only-styles();
		}
		@include screen-md-max {
			@include mobile-only-styles();
		}
	}

	&.mobile-breakpoint-sm {
		@include screen-sm-min {
			@include desktop-only-styles();
		}
		@include screen-sm-max {
			@include mobile-only-styles();
		}
	}
}
