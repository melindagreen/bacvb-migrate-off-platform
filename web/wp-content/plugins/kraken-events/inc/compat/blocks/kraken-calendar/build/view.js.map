{"version":3,"file":"view.js","mappings":"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","sources":["webpack://eventastic-calendar/./src/calendar.js","webpack://eventastic-calendar/webpack/bootstrap","webpack://eventastic-calendar/webpack/runtime/define property getters","webpack://eventastic-calendar/webpack/runtime/hasOwnProperty shorthand","webpack://eventastic-calendar/webpack/runtime/make namespace object","webpack://eventastic-calendar/./src/view.js"],"sourcesContent":["/**\n * Eventastic Calendar Block v2.0\n *\n * This script handles the frontend functionality for the Eventastic Calendar block.\n * It uses a pre-loaded `window.preLoadData` object and fetches subsequent months'\n * data on demand. It displays events in a sidebar list when a user clicks on a\n * day in the FullCalendar instance.\n */\n\n// =============================================================================\n// UTILITY FUNCTIONS\n// =============================================================================\n\n/**\n * Parses a date string in YYYYMMDD format into a valid JavaScript Date object.\n * @param {string} dateString The date string (e.g., \"20250709\").\n * @returns {Date} A new Date object in the local timezone.\n */\nfunction parseYMDString(dateString) {\n    if (!dateString || typeof dateString !== 'string' || dateString.length !== 8) {\n        return null;\n    }\n    const year = parseInt(dateString.substring(0, 4), 10);\n    const month = parseInt(dateString.substring(4, 6), 10) - 1; // Month is 0-indexed\n    const day = parseInt(dateString.substring(6, 8), 10);\n    return new Date(year, month, day);\n}\n\n/**\n * Formats a Date object or a date string into various string representations.\n * @param {object} args - Arguments for formatting.\n * @param {Date|string} args.input - The date to format.\n * @param {string} [args.dateFormat=\"Y-M-D\"] - The target format.\n * @returns {string} The formatted date string.\n */\nfunction formatDate({ input, dateFormat = \"Y-M-D\" }) {\n    const date = (input instanceof Date) ? input : new Date(input);\n    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    const shortMonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\n    const year = date.getFullYear();\n    const monthIndex = date.getMonth();\n    const day = date.getDate();\n\n    const zeroMonth = ('0' + (monthIndex + 1)).slice(-2);\n    const zeroDay = ('0' + day).slice(-2);\n\n    switch (dateFormat) {\n        case \"Y-M-D\": return `${year}-${zeroMonth}-${zeroDay}`;\n        case \"Ymd\": return `${year}${zeroMonth}${zeroDay}`;\n        case \"Y-M\": return `${year}-${zeroMonth}`;\n        case \"M D\": return `${months[monthIndex]} ${day}`;\n        case \"m D\": return `${shortMonths[monthIndex]} ${day}`;\n        case \"monthName\": return months[monthIndex];\n        case \"fullDate\": return `${months[monthIndex]} ${day}, ${year}`;\n        default: return `${year}-${zeroMonth}-${zeroDay}`;\n    }\n}\n\n/**\n * Parses a time string (e.g., \"07:00 pm\") into a Date object for time-based sorting.\n * @param {string} timeStr The time string to parse.\n * @returns {Date|false} A Date object, or false if input is invalid.\n */\nfunction parseTime(timeStr) {\n    if (typeof timeStr !== 'string' || timeStr.trim() === '') return false;\n    const [time, period] = timeStr.toLowerCase().split(' ');\n    const [hours, minutes] = time.split(':');\n    let h = parseInt(hours, 10);\n    if (period === 'pm' && h !== 12) h += 12;\n    if (period === 'am' && h === 12) h = 0;\n    const date = new Date();\n    date.setHours(h, parseInt(minutes, 10), 0, 0);\n    return date;\n}\n\n// =============================================================================\n// EVENT DATA PROCESSING\n// =============================================================================\n\n/**\n * Processes raw event objects and expands recurring ones into individual instances.\n * @param {Array<object>} eventObjects - The array of raw event objects from the API.\n * @returns {Array<object>} A new array of events formatted for FullCalendar.\n */\nfunction processAndExpandEvents(eventObjects) {\n    const processedEvents = [];\n    if (!Array.isArray(eventObjects)) return processedEvents;\n\n    eventObjects.forEach(event => {\n        const startDate = parseYMDString(event.events_meta.event_start_date);\n        if (!startDate) return; // Skip if start date is invalid\n\n        const endDate = event.events_meta.event_end_date ? parseYMDString(event.events_meta.event_end_date) : startDate;\n        const isDaily = event.events_meta.events_recurrence_options === 'daily';\n\n        // For daily events, create an instance for each day in the range\n        if (isDaily && endDate) {\n            let loopDate = new Date(startDate);\n            while (loopDate <= endDate) {\n                processedEvents.push({\n                    id: `${event.id}_${formatDate({ input: loopDate, dateFormat: 'Y-M-D' })}`,\n                    title: event.title.rendered,\n                    start: new Date(loopDate), // Use a new Date object\n                    allDay: event.events_meta.events_event_all_day === 'true',\n                    extendedProps: { ...event }\n                });\n                loopDate.setDate(loopDate.getDate() + 1);\n            }\n        } else {\n            // Handle one-day and specific-date events\n            processedEvents.push({\n                id: event.id,\n                title: event.title.rendered,\n                start: startDate,\n                end: endDate && endDate > startDate ? new Date(endDate.setDate(endDate.getDate() + 1)) : null, // Set end date for multi-day non-daily events\n                allDay: event.events_meta.events_event_all_day === 'true',\n                extendedProps: { ...event }\n            });\n        }\n    });\n    return processedEvents;\n}\n\n\n// =============================================================================\n// DOM & UI FUNCTIONS\n// =============================================================================\n\n/**\n * Builds and renders the grid of event cards in the sidebar.\n * @param {Array} events - An array of event objects to display.\n * @param {object} args - Display options.\n */\nfunction buildEventsGrid(events, args = {}) {\n    const $target = jQuery('#calendarList');\n    const config = jQuery('#calendar-container').data();\n    const maxEvents = config.maxnumberofgrideventstoshow || 10;\n    let output = \"\";\n\n    events.sort((a, b) => {\n        if (a.start < b.start) return -1;\n        if (a.start > b.start) return 1;\n        const timeA = parseTime(a.extendedProps.events_meta.event_start_time);\n        const timeB = parseTime(b.extendedProps.events_meta.event_start_time);\n        if (!timeA || !timeB) return 0;\n        return timeA - timeB;\n    });\n\n    if (events.length > 0) {\n        events.forEach((event, index) => {\n            const props = event.extendedProps;\n\n            // If a specific day was clicked, use that date for display. Otherwise, use the event's start date.\n            const dateToDisplay = args.clickedDate ? args.clickedDate : event.start;\n            const eventDate = formatDate({ input: dateToDisplay, dateFormat: config.cardconfig_dateformat || 'M D' });\n\n            const eventTime = props.events_meta.event_start_time ? props.events_meta.event_start_time : '';\n            const categories = Array.isArray(props.categories) ? props.categories.map(c => c.name).join(', ') : '';\n            const location = props.events_meta.events_addr_multi || '';\n\n            const template = `\n                <div class=\"events-card ${index >= maxEvents ? 'overflow-card' : ''}\">\n                    <a href=\"${props.permalink}\" target=\"_blank\">\n                        <div class=\"wrapper\">\n                            ${config.cardconfig_showthumbnail && props.featured_image ? `<div class=\"image-wrapper\" style=\"background-image:url(${props.featured_image});\"></div>` : ''}\n                            <div class=\"content\">\n                                ${config.cardconfig_showcategories && categories ? `<div class=\"categories\">${categories}</div>` : ''}\n                                <div class=\"date\">${eventDate} ${eventTime}</div>\n                                <div class=\"title\">${props.title.rendered}</div>\n                                ${location ? `<div class=\"location\">${location}</div>` : ''}\n                            </div>\n                        </div>\n                    </a>\n                </div>\n            `;\n            output += template;\n        });\n\n        if (events.length > maxEvents) {\n            output += \"<button id='eventastic-calendar-view-more'>View More</button>\";\n        }\n    } else {\n        const mssg = config.contentconfig_failuremessage || \"There are no events for this day.\";\n        output = `<div class='ajax-message'>${mssg}</div>`;\n    }\n    $target.html(output);\n}\n\n/**\n * Toggles the visibility of overflow event cards.\n */\nfunction toggleViewMore() {\n    const $button = jQuery('#eventastic-calendar-view-more');\n    $button.toggleClass('active');\n    jQuery('.overflow-card').toggleClass('active');\n    $button.text($button.hasClass('active') ? 'Show Less' : 'View More');\n}\n\n\n// =============================================================================\n// FILTERING & DATA RETRIEVAL\n// =============================================================================\n\n/**\n * Fetches and processes events for a given month and adds them to the calendar.\n * @param {Date} date - A date within the target month.\n * @param {object} calendar - The FullCalendar instance.\n * @param {Array} loadedMonths - An array tracking which months have been loaded.\n */\nasync function fetchEventsForMonth(date, calendar, loadedMonths) {\n    const targetMonth = formatDate({ input: date, dateFormat: 'Y-M' });\n    if (loadedMonths.includes(targetMonth)) return;\n\n    // Get a reference to the loader element\n    const $loader = jQuery('.eventastic-sidebar .eventastic-loader');\n\n    try {\n        // Show the loader before starting the fetch\n        $loader.addClass('is-loading');\n\n        const startDate = formatDate({ input: new Date(date.getFullYear(), date.getMonth(), 1), dateFormat: 'Ymd' });\n        const endDate = formatDate({ input: new Date(date.getFullYear(), date.getMonth() + 1, 0), dateFormat: 'Ymd' });\n        const apiBase = window.preLoadData.rest_url;\n        const apiUrl = `${apiBase}kraken/v1/events?date_filter=true&start_date=${startDate}&end_date=${endDate}`;\n\n        const response = await fetch(apiUrl);\n        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n        const data = await response.json();\n\n        loadedMonths.push(targetMonth);\n\n        if (data && Array.isArray(data.events) && data.events.length > 0) {\n            const newEvents = processAndExpandEvents(data.events);\n            calendar.addEventSource(newEvents);\n\n            newEvents.forEach(event => {\n                const dateStr = formatDate({ input: event.start, dateFormat: 'Y-M-D' });\n                const $dayCell = jQuery(`.fc-daygrid-day[data-date=\"${dateStr}\"]`);\n                if ($dayCell.length && !$dayCell.find('.event-dot').length) {\n                    const dotEl = document.createElement('div');\n                    dotEl.className = 'event-dot';\n                    $dayCell.find('.fc-daygrid-day-frame').append(dotEl);\n                }\n            });\n        }\n    } catch (error) {\n        console.error('Failed to fetch events for month:', error);\n    } finally {\n        // Always hide the loader after the operation is complete\n        $loader.removeClass('is-loading');\n    }\n}\n\n/**\n * Retrieves the currently selected category slugs from the filter controls.\n * @returns {Array<string>} An array of selected category slugs.\n */\nfunction getSelectedCategories() {\n    const config = jQuery('#calendar-container').data();\n    const slugs = [];\n    const filterType = config.filterconfig_categoryelementtype || 'buttons';\n\n    if (filterType === \"select\") {\n        jQuery(\".category-filter > option:selected\").each((_, el) => {\n            if (jQuery(el).val()) slugs.push(jQuery(el).val());\n        });\n    } else if (filterType === \"checkboxes\") {\n        jQuery('.category-checkbox:checked').each((_, el) => slugs.push(jQuery(el).val()));\n    } else {\n        jQuery(\".event-category-filter.button.active\").each((_, el) => slugs.push(jQuery(el).data('category')));\n    }\n    return slugs;\n}\n\n/**\n * Filters all loaded events based on date, category, and keyword.\n * @param {object} args - Filtering criteria.\n * @returns {Array} The filtered array of event objects.\n */\nfunction getFilteredEvents(args) {\n    const allEvents = window.eventasticCalendar.getEvents();\n    const { targetDate, categories, keyword } = args;\n    const targetDateStr = formatDate({ input: targetDate, dateFormat: 'Y-M-D' });\n\n    return allEvents.filter(event => {\n        // Date filter\n        const eventDateStr = formatDate({ input: event.start, dateFormat: 'Y-M-D' });\n        if (eventDateStr !== targetDateStr) return false;\n\n        // Keyword filter\n        if (keyword) {\n            const searchPattern = new RegExp(keyword, \"i\");\n            const title = event.title;\n            const content = event.extendedProps.content || '';\n            if (!searchPattern.test(title) && !searchPattern.test(content)) return false;\n        }\n\n        // Category filter\n        if (categories && categories.length > 0) {\n            if (!event.extendedProps.categories || event.extendedProps.categories.length === 0) return false;\n            const eventCategories = event.extendedProps.categories.map(c => c.slug);\n            if (!categories.some(slug => eventCategories.includes(slug))) return false;\n        }\n\n        return true;\n    });\n}\n\n// =============================================================================\n// MAIN INITIALIZATION\n// =============================================================================\nexport function initializeEventasticCalendarBlock() {\n    const $calendarContainer = jQuery('#calendar-container');\n    if (!$calendarContainer.length) {\n        console.error(\"Eventastic Error: Missing #calendar-container element.\");\n        return;\n    }\n\n    const config = $calendarContainer.data() || {};\n    const loadedMonths = []; // Track fetched months\n\n    // 1. Process initial pre-loaded data\n    const initialEvents = processAndExpandEvents(window.preLoadData.event_objects || []);\n    const initialMonth = formatDate({ input: new Date(), dateFormat: 'Y-M' });\n    loadedMonths.push(initialMonth);\n\n    // 2. Initialize FullCalendar\n    const calendarEl = document.getElementById('calendar');\n    const eventasticCalendar = new FullCalendar.Calendar(calendarEl, {\n        events: initialEvents,\n        height: 'auto',\n        headerToolbar: {\n            start: 'title',\n            center: null,\n            end: 'prev,next'\n        },\n        eventDisplay: 'none', // HIDE events from the calendar grid\n        datesSet: async (dateInfo) => { // 1. Make the function async\n            // This fires on initial load and when the view changes.\n            // 2. Await the fetch to ensure events are loaded before proceeding.\n            await fetchEventsForMonth(dateInfo.view.currentStart, eventasticCalendar, loadedMonths);\n\n            // Set the title for the whole month\n            const monthName = formatDate({ input: dateInfo.view.currentStart, dateFormat: 'monthName' });\n            jQuery('#events-list-title').html(`<h3>Upcoming ${monthName} Events</h3>`);\n\n            // 3. Get all events from the calendar and filter them for the current month.\n            const allEvents = window.eventasticCalendar.getEvents();\n            const viewStart = dateInfo.view.currentStart;\n            const viewMonth = viewStart.getMonth();\n            const viewYear = viewStart.getFullYear();\n\n            const eventsForMonth = allEvents.filter(event => {\n                const eventDate = event.start;\n                return eventDate.getMonth() === viewMonth && eventDate.getFullYear() === viewYear;\n            });\n\n            // 4. Build the grid with all of this month's events.\n            buildEventsGrid(eventsForMonth);\n        },\n        dayCellDidMount: (arg) => {\n            // Get all events currently loaded in the calendar instance\n            const allEvents = window.eventasticCalendar.getEvents();\n            const dateStr = formatDate({ input: arg.date, dateFormat: 'Y-M-D' });\n\n            // Check all events to see if any fall on the current day\n            const eventsOnDay = allEvents.filter(e => formatDate({ input: e.start, dateFormat: 'Y-M-D' }) === dateStr);\n\n            if (eventsOnDay.length > 0) {\n                const dotEl = document.createElement('div');\n                dotEl.className = 'event-dot';\n                // Check if a dot already exists to prevent duplicates\n                if (!arg.el.querySelector('.event-dot')) {\n                    arg.el.querySelector('.fc-daygrid-day-frame').appendChild(dotEl);\n                }\n            }\n\n            // Inside the dayCellDidMount function...\n            arg.el.addEventListener('click', () => {\n                jQuery('.fc-daygrid-day').removeClass('active');\n                arg.el.classList.add('active');\n\n                const eventsForDay = getFilteredEvents({\n                    targetDate: arg.date,\n                    categories: getSelectedCategories(),\n                    keyword: jQuery(\"#Keyword\").val(),\n                });\n\n                jQuery('#events-list-title').html(`<h3>Events for ${formatDate({ input: arg.date, dateFormat: 'fullDate' })}</h3>`);\n\n                // Pass the clicked date into buildEventsGrid\n                buildEventsGrid(eventsForDay, { clickedDate: arg.date });\n            });\n        },\n    });\n\n    window.eventasticCalendar = eventasticCalendar;\n    eventasticCalendar.render();\n\n    // 3. Bind Global Event Handlers\n    function reRenderGrid() {\n        const activeDayEl = jQuery('.fc-daygrid-day.active');\n        const activeDate = activeDayEl.length ? new Date(activeDayEl.data('date') + 'T00:00:00') : null;\n        if (!activeDate) return;\n\n        const eventsForDay = getFilteredEvents({\n            targetDate: activeDate,\n            categories: getSelectedCategories(),\n            keyword: jQuery(\"#Keyword\").val(),\n        });\n        buildEventsGrid(eventsForDay);\n    }\n\n    jQuery('.event-category-filter, .category-filter, .category-checkbox').on('change click', function (e) {\n        if (e.type === 'click' && jQuery(this).is('.event-category-filter')) {\n            jQuery(this).toggleClass('active');\n        }\n        reRenderGrid();\n    });\n\n    jQuery(\".eventFilterSubmit\").on('click', reRenderGrid);\n\n    jQuery(\".resetFilters\").on('click', () => {\n        jQuery('.event-category-filter.button.active').removeClass('active');\n        jQuery('.category-checkbox:checked').prop('checked', false);\n        jQuery('.category-filter').val('');\n        jQuery(\"#Keyword\").val('');\n        reRenderGrid();\n    });\n\n    jQuery('body').on('click', '#eventastic-calendar-view-more', (e) => {\n        e.preventDefault();\n        toggleViewMore();\n    });\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { initializeEventasticCalendarBlock } from \"./calendar\";\njQuery(\"document\").ready(function($) {\n    initializeEventasticCalendarBlock();        \n});"],"names":["parseYMDString","dateString","length","year","parseInt","substring","month","day","Date","formatDate","input","dateFormat","date","months","shortMonths","getFullYear","monthIndex","getMonth","getDate","zeroMonth","slice","zeroDay","parseTime","timeStr","trim","time","period","toLowerCase","split","hours","minutes","h","setHours","processAndExpandEvents","eventObjects","processedEvents","Array","isArray","forEach","event","startDate","events_meta","event_start_date","endDate","event_end_date","isDaily","events_recurrence_options","loopDate","push","id","title","rendered","start","allDay","events_event_all_day","extendedProps","setDate","end","buildEventsGrid","events","args","$target","jQuery","config","data","maxEvents","maxnumberofgrideventstoshow","output","sort","a","b","timeA","event_start_time","timeB","index","props","dateToDisplay","clickedDate","eventDate","cardconfig_dateformat","eventTime","categories","map","c","name","join","location","events_addr_multi","template","permalink","cardconfig_showthumbnail","featured_image","cardconfig_showcategories","mssg","contentconfig_failuremessage","html","toggleViewMore","$button","toggleClass","text","hasClass","fetchEventsForMonth","calendar","loadedMonths","targetMonth","includes","$loader","addClass","apiBase","window","preLoadData","rest_url","apiUrl","response","fetch","ok","Error","status","json","newEvents","addEventSource","dateStr","$dayCell","find","dotEl","document","createElement","className","append","error","console","removeClass","getSelectedCategories","slugs","filterType","filterconfig_categoryelementtype","each","_","el","val","getFilteredEvents","allEvents","eventasticCalendar","getEvents","targetDate","keyword","targetDateStr","filter","eventDateStr","searchPattern","RegExp","content","test","eventCategories","slug","some","initializeEventasticCalendarBlock","$calendarContainer","initialEvents","event_objects","initialMonth","calendarEl","getElementById","FullCalendar","Calendar","height","headerToolbar","center","eventDisplay","datesSet","dateInfo","view","currentStart","monthName","viewStart","viewMonth","viewYear","eventsForMonth","dayCellDidMount","arg","eventsOnDay","e","querySelector","appendChild","addEventListener","classList","add","eventsForDay","render","reRenderGrid","activeDayEl","activeDate","on","type","is","prop","preventDefault","ready","$"],"sourceRoot":""}