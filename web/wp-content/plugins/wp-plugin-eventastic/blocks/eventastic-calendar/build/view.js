(()=>{"use strict";function e(e){if(e){if("object"==typeof e)var t=("0"+(e.getUTCMonth()+1)).slice(-2),a=("0"+e.getUTCDate()).slice(-2),r=e.getFullYear()+"-"+t+"-"+a+"T00:00:00.000+00:00",n=new Date(r).getTime();else Number.isInteger(e)?n=e:(r=e+"T00:00:00.000+00:00",n=new Date(r).getTime());return n}return!1}function t(t){var a=e(t),r=new Date(a);return e(new Date(r.getFullYear(),r.getMonth()+1,r.getDate()))}function a(t){var a=e(t),r=new Date(a);return new Date(r.getTime()+6e4*r.getTimezoneOffset())}function r(e){var t=a(e.input),r=new Date(t.getTime()+6e4*t.getTimezoneOffset()),n=void 0!==e.dateFormat?e.dateFormat:"Y-M-D",i=r.getFullYear()+"-"+r.getMonth()+"-"+r.getDate(),d=("0"+(r.getUTCMonth()+1)).slice(-2),o=("0"+r.getUTCDate()).slice(-2);return"Y-M-D"==n&&(i=r.getFullYear()+"-"+d+"-"+o),"Y/M/D"==n&&(i=r.getFullYear()+"/"+d+"/"+o),"Y-M"==n&&(i=r.getFullYear()+"-"+d),"M-D-Y"==n&&(i=r.getMonth()+1+"-"+r.getDate()+"-"+r.getFullYear()),"M/D/Y"==n&&(i=d+"/"+o+"/"+r.getFullYear()),"M-D"==n&&(i=r.getMonth()+1+"-"+r.getDate()),"M/D"==n&&(i=r.getMonth()+1+"/"+r.getDate()),"m D"===n&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][r.getMonth()]+" "+r.getDate()),"M D"===n&&(i=v(r.getMonth())+" "+r.getDate()),i}function n(t,n){var i=void 0!==n.start_date?e(n.start_date):e(Date.now()),d=(void 0!==n.grid_start_date?e(n.grid_start_date):null)||i,o=void 0!==n.end_date?e(n.end_date):null,s=(void 0!==n.grid_end_date?e(n.grid_end_date):null)||o,c=void 0!==n.maxEvents?n.maxEvents:null,l=jQuery("#calendar-container").data(),g=w();let u=[];var v=[],m={};for(const[e,i]of Object.entries(t.days)){var _=1e3*e,h=_,y=(h-d)/864e5,D=!1;if(y>=0&&(D=!0),D&&void 0!==s){var b=(s-h)/864e5;b<=0&&(D=!1),(!y||y>0)&&(!b||b>0)&&(D=!0)}if(D)for(const[e,i]of Object.entries(t.days[_/1e3].events)){var j=!1;if(void 0!==n.keyword&&n.keyword){var M=n.keyword.split(" ");j=!0;for(const[e,a]of Object.entries(M)){let e=new RegExp(a,"i");t.event_objects[i].post_content.match(e)&&(j=!1),t.event_objects[i].post_title.match(e)&&(j=!1)}}if(!j&&(c&&u.length<c||!c)&&p(t.event_objects[i],g)){var C=void 0!==l.cardconfig_dateformat&&l.cardconfig_dateformat?l.cardconfig_dateformat:"M D";void 0!==l.listconfig_recurringdatehandler&&"showOnce"==l.listconfig_recurringdatehandler?v.includes(i)||((m=structuredClone(t.event_objects[i])).forGridDate=r({input:a(h),dateFormat:C}),u.push(m),v.push(i)):((m=structuredClone(t.event_objects[i])).forGridDate=f(a(h),"fullMonth"),u.push(m))}}}return u}function i(e){var t=jQuery("#calendar-container").data(),a=void 0!==t.cardconfig_imagesize?t.cardconfig_imagesize:"thumbnail";let n=new URLSearchParams;return n.append("action","get_events_date_ordered"),n.append("use_categories",!0),n.append("layoutStyle","integrated"),n.append("start_date",e.start_date),n.append("end_date",e.end_date),n.append("image_size",a),e.categories&&n.append("category_slug",e.categories),{bodyData:n,image_size:"large",start_date:e.start_date,targetMonth:r({input:e.start_date,dateFormat:"Y-M"}),end_date:e.end_date,calendarConfig_eventRenderType:void 0!==e.calendarConfig_eventRenderType?e.calendarConfig_eventRenderType:void 0!==t.calendarConfig_eventRenderType?t.calendarConfig_eventRenderType:"emptyCircle",layoutStyle:"integrated",renderCalendarEvents:!(void 0===e.renderCalendarEvents||!e.renderCalendarEvents)}}function d(e){var t=jQuery("#calendar-container").data(),a=[];if("initial-load"==(void 0!==e.callOrigin&&e.callOrigin?e.callOrigin:null))a=void 0!==t.contentconfig_categories&&t.contentconfig_categories?t.contentconfig_categories:[];else if(void 0!==t.filterconfig_categoryelementtype)if("select"==t.filterconfig_categoryelementtype){var r=jQuery(".category-filter > option:selected");jQuery.each(r,(function(e,t){jQuery(t).val()&&a.push(jQuery(t).val())}))}else"checkboxes"==t.filterconfig_categoryelementtype?jQuery(".category-checkbox:checkbox:checked").each((function(){a.push(jQuery(this).val())})):(r=jQuery(".event-category-filter.button.active"),jQuery.each(r,(function(e,t){a.push(jQuery(t).data("category"))})));return a}function o(e){var t={};for(const[a,r]of Object.entries(e))"bodyData"!=a&&(t[a]=r);return t}function s(){jQuery(".fc-day, .fc-day-top").on("click",(function(t){var a=jQuery(t.currentTarget);jQuery(".fc-day-top, .fc-day").removeClass("active"),a.addClass("active");var r=a.data("date"),i=e(r),d=i+86399999,o={start_date:i,end_date:d};_(n(window.preLoadData,o),{title:f(new Date(r),"fullMonth"),start_date:i,end_date:d})}))}function c(n){var s,c,u=r({input:n.start_date,dateFormat:"Y-M"}),v=(s=e(n.start_date),c=new Date(s),e(new Date(c.getFullYear(),c.getMonth()-1,c.getDate()))),m=t(n.end_date),_=[];for(_.push(u);m-v>0;){var p=r({input:v,dateFormat:"Y-M"});void 0===window.preLoadData||void 0===window.preLoadData.monthsLoaded||window.preLoadData.monthsLoaded.includes(p)||_.includes(p)||_.push(p),v=t(v)}if(n.categories=d({callOrigin:"initial-load"}),_.length>0)for(var h=0;h<_.length;h++){var y=_[h];if(void 0!==window.preLoadData&&void 0!==window.preLoadData.monthsLoaded&&window.preLoadData.monthsLoaded.includes(y)){n.renderCalendarEvents=!0,n.maxEvents=void 0!==n.maxNumberOfGridEventsToPreLoad&&n.maxNumberOfGridEventsToPreLoad>0?n.maxNumberOfGridEventsToPreLoad:1e3,"initial-load"!=n.callOrigin&&l(window.preLoadData,n);var w=new Date(a(n.start_date).getFullYear(),a(n.start_date).getMonth()-1,1),D=f(w,"monthsLoaded"),b=new Date(w.getFullYear(),w.getMonth()+1,1),j=r({input:w,dateFormat:"Y-M-D"}),M=r({input:b,dateFormat:"Y-M-D"});if(!window.preLoadData.monthsLoaded.includes(D)){var C=o(n);(F=structuredClone(C)).renderCalendarEvents=!1,F.start_date=j,F.end_date=M,g(i(F))}}else{var F,Y=a(y+"-01"),Q=r({input:Y,dateFormat:"Y-M-D"}),T=r({input:new Date(Y.getFullYear(),Y.getMonth()+1,0),dateFormat:"Y-M-D"});C=o(n),(F=structuredClone(C)).renderCalendarEvents=!1,F.start_date=Q,F.end_date=T,g(i(F))}}else console.log(" alert:: removed line 405 conditional. if you get this, add it back")}function l(e,t){var i=jQuery("#calendar-container").data(),o=!(void 0===t.renderCalendarEvents||!t.renderCalendarEvents),c=r({input:t.start_date,dateFormat:"Y-M"});if("undefined"!=typeof FullCalendar){var l=e.fullCalendarEventsSource;"list"==i.calendarconfig_eventrendertype?window.preLoadData.monthsEventSourceAdded.includes(c)||(window.calendar.addEventSource(l),window.preLoadData.monthsEventSourceAdded.push(c)):o&&(t.categories=d({callOrigin:"category-filter"}),h(e,t))}if(o){if(t.start_date)var g=a(t.start_date);else g=new Date;if(void 0!==t.callOrigin&&"category-filter"==t.callOrigin)var u=jQuery("#calendarList"),f=u.data("start_date"),m=u.data("end_date"),p=jQuery("#events-list-title h3").html();else{f=new Date(g.getTime()+6e4*g.getTimezoneOffset());let e=new Date(g.getFullYear(),g.getMonth(),1);e.setDate(e.getDate()+1),p=void 0!==t.title&&t.title?t.title:v(g.getMonth())+" Events"}let r=new Date(g.getFullYear(),g.getMonth()+1,1),i=t.maxNumberofEvents?t.maxNumberofEvents:1e3;_(n(e,t={start_date:t.start_date,end_date:r,maxEvents:i,categories:t.categories,grid_start_date:t.start_date,grid_end_date:t.end_date,keyword:t.keyword,callOrigin:t.callOrigin}),{title:p,start_date:f,end_date:m}),s()}}function g(e){fetch(Eventastic_Variables.ajax_url,{method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:e.bodyData}).then((e=>e.json())).then((function(t){void 0===window.preLoadData||void 0===window.preLoadData.monthsLoaded||window.preLoadData.monthsLoaded.includes(e.targetMonth)||(window.preLoadData.days={...window.preLoadData.days,...t.days},window.preLoadData.event_objects={...window.preLoadData.event_objects,...t.event_objects},window.preLoadData.monthsLoaded.push(e.targetMonth)),l(t,e)})).catch((function(e){console.log("error"),console.log(JSON.stringify(e))}))}function u(e,t,a){t="{{"+t+"}}";const r=new RegExp(`${t}`,"g");return e.replace(r,a)}function v(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e]}function f(e,t){var a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getUTCDay()],r=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getUTCMonth()];if("calendar"===t)var n=("0"+(e.getUTCMonth()+1)).slice(-2)+"/"+("0"+e.getUTCDate()).slice(-2)+"/"+e.getUTCFullYear();else n="fullMonth"===t?r+" "+("0"+e.getUTCDate()).slice(-2)+",  "+e.getUTCFullYear():"fullCalendar"===t?e.getUTCFullYear()+"-"+("0"+(e.getUTCMonth()+1)).slice(-2)+"-"+("0"+e.getUTCDate()).slice(-2):"monthsLoaded"===t?e.getUTCFullYear()+"-"+("0"+(e.getUTCMonth()+1)).slice(-2):a+", "+r+" "+("0"+e.getUTCDate()).slice(-2)+" "+e.getUTCFullYear();return n}function m(e){if(void 0!==e){const[t,a]=e.split(" "),[r,n]=t.split(":");let i=new Date;return i.setHours(parseInt(r,10)),("PM"==a||"pm"==a&&12!==i.getHours())&&i.setHours(i.getHours()+12),i.setMinutes(parseInt(n,10)),i.setSeconds(0),i}return!1}function _(t,a){var n="",i=jQuery("#calendar-container").data(),d=void 0!==a.cardconfig_showdate?a.cardconfig_showdate:i.cardconfig_showdate,o=i.maxnumberofgrideventstoshow,s=jQuery("#calendarList");s.data("start_date",a.start_date),s.data("end_date",a.end_date);var c="Y-M-D";if(void 0!==i.cardconfig_upcomingdateformat&&i.cardconfig_upcomingdateformat&&(c=i.cardconfig_upcomingdateformat),void 0!==window.override&&void 0!==window.override.template)var l=window.override.template;else l='\n                <div class="events-card {{card_classes}}">\n                    <a href="{{event_url}}">\n                        <div class="wrapper">\n                            <div class="content">',i.cardconfig_showthumbnail&&(l+='<div class="image-wrapper" style="background-image:url({{event_image}});"></div>'),l+='\n                                <div class="categories">{{event_categories}}</div>\n                                <div class="date">{{event_date}} {{event_time}}</div>',i.cardconfig_showpatternstring&&(l+='<div class="pattern-string">{{event_pattern}}</div>'),l+='   <div class="upcoming-dates">{{event_upcoming_dates}}</div>\n                                <div class="title">{{event_title}}</div>\n                                <div class="location">{{event_address}}</div>\n                            </div>\n                        </div>\n                    </a>\n                </div>\n            ';var g=0;if(Object.keys(t).length>0)Object.keys(t).sort(((e,a)=>{const r=m(t[e].meta.start_time),n=m(t[a].meta.start_time);return r<n?-1:r>n?1:0})),jQuery.each(t,(function(t,s){s.meta.pattern_dates&&s.meta.pattern_dates.length>1&&s.meta.pattern_dates.forEach((function(t){if((t=e(t))>=e(a.grid_start_date)){let e=structuredClone(s);e.meta.start_date=t,e.forGridDate=r({input:t,dateFormat:a.date_format})}}));var v=s.meta.start_date,f=s.meta.end_date?s.meta.end_date:null,m=void 0!==i.cardconfig_datestyle&&i.cardconfig_datestyle?i.cardconfig_datestyle:"startDate",_="",p=void 0!==i.cardconfig_dateformat&&i.cardconfig_dateformat?i.cardconfig_dateformat:"M D";void 0!==i.cardconfig_showdate&&i.cardconfig_showdate&&d&&(_=r({input:v,dateFormat:p}),s.forGridDate?_=s.forGridDate:"range"==m&&f&&(_=v=r({input:v,dateFormat:p}),(f=r({input:f,dateFormat:p}))!=v&&(_+=" - "+f)));var h=u(l,"event_date",_),y="";i.cardconfig_showpatternstring&&s.meta.patternString&&s.meta.patternString.length>1&&(y=s.meta.patternString),h=u(h,"event_pattern",y);var w="";i.cardconfig_showtime&&(s.meta.start_time&&s.meta.start_time.length>3&&(i.cardconfig_showdate&&(w="</br>"),w+=s.meta.start_time),s.meta.end_time&&s.meta.end_time.length>3&&(w+="-"+s.meta.end_time)),h=u(h,"event_time",w);var D="";if(i.cardconfig_showupcomingdates){var b=function(t){if(void 0!==t.start_date&&t.start_date)var a=t.start_date;else a=e(new Date);if(void 0!==t.event.meta.recurrence_options&&t.event.meta.recurrence_options){if("pattern"==t.event.meta.recurrence_options)var n=t.event.meta.pattern_dates;"specific_days"==t.event.meta.recurrence_options&&(n=t.event.meta.repeat_dates)}var i=[];if("object"==typeof n&&null!==n)for(var[d,o]of Object.entries(n)){var s=e(o);if(s>a){var c=void 0!==t.returnType?t.returnType:"arrayOfDates",l=void 0!==t.dateFormat?t.dateFormat:"Y-m-d";"arrayOfStamps"==c?i.push(s):("Y-m-d"!=l&&(o=r({input:s,dateFormat:l})),"arrayOfDates"==c&&i.push(o),"arrayOfObjects"==c&&i.push({testDateTimestamp:o}))}}return i}({event:s,dateFormat:c});b.length>0&&(D="Upcoming Dates: "+b.join(", "))}h=u(h,"event_upcoming_dates",D);var j="";s.post_title&&(j=s.post_title),h=u(h,"event_title",j);var M="";s.post_excerpt?M=s.post_excerpt:s.alternative_excerpt&&(M=s.alternative_excerpt),h=u(h,"event_excerpt",M);var C="";if(i.cardconfig_showcategories&&void 0!==s.meta.thisCategories&&s.meta.thisCategories.length>0){for(var F=[],Y=0;Y<s.meta.thisCategories.length;Y++){var Q=s.meta.thisCategories[Y];void 0!==i.categories?(1==i.categories.length&&"all"==i.categories[0]||i.categories.includes(Q.slug))&&F.push(Q.name):F.push(Q.name)}C+=F.join(", ")}h=u(h,"event_categories",C);var T="";if(i.cardconfig_showaddress){if(void 0!==s.meta.thisVenues&&s.meta.thisVenues.length>0&&"undefined"!=typeof venues){var O=s.meta.thisVenues[0].term_id,L=venues[O];T=void 0!==L.address?L.address.loc_name+" at "+L.address.street:s.meta.thisVenues[0].name+"<br>"+s.meta.thisVenues[0].description}T||("street"==i.cardconfig_addressformat&&(T=s.meta.addr1),"street_city"==i.cardconfig_addressformat&&(T=s.meta.addr1,T+=s.meta.city?" "+s.meta.city:""),"street_city_state"==i.cardconfig_addressformat&&(T=s.meta.addr1,T+=s.meta.city?" "+s.meta.city:"",T+=s.meta.state?" "+s.meta.state:""),"street_city_state_zip"==i.cardconfig_addressformat&&(T=s.meta.addr1,T+=s.meta.city?" "+s.meta.city:"",T+=s.meta.state?" "+s.meta.state:"",T+=s.meta.zip?" "+s.meta.zip:""),"city_state"==i.cardconfig_addressformat&&(T=s.meta.city?" "+s.meta.city:"",T+=s.meta.state?" "+s.meta.state:""))}if(h=u(h,"event_address",T),i.cardconfig_showthumbnail){var E=null;s.meta.thumbnail&&null!==s.meta.thumbnail&&(E=s.meta.thumbnail[0]),h=u(h,"event_image",E)}var k="";s.permalink&&(k=s.permalink),h=u(h,"event_url",k);var x="";g>=o&&(x=" overflow-card"),h=u(h,"card_classes",x),n+=h,g++}));else{var v=i.contentconfig_failuremessage?i.contentconfig_failuremessage:"There are no Events matching that.";n="<div class='ajax-message'>"+v+"</div>"}g>o+1&&(n+="<button id='eventastic-calendar-view-more'>View More</button>"),(void 0!==a.title||a.title)&&jQuery("#events-list-title").html("<h3>"+a.title+"</h3>"),s.html(""),s.append(n),jQuery("#eventastic-calendar-view-more").on("click",(function(e){e.preventDefault(),jQuery("#eventastic-calendar-view-more").toggleClass("active"),jQuery("#eventastic-calendar-view-more").hasClass("active")?(jQuery("#eventastic-calendar-view-more").html("Show Less"),jQuery(".overflow-card").addClass("active")):(jQuery("#eventastic-calendar-view-more").html("View More"),jQuery(".overflow-card").removeClass("active"))}))}function p(e,t){var a=[],r=!1;if(void 0!==t.categories)if(1==t.categories.length&&""==t.categories[0])var n=[];else n=t.categories;if(void 0!==n){if(void 0!==e.meta&&void 0!==e.meta.thisCategories&&e.meta.thisCategories.length>0)for(const[t,i]of Object.entries(e.meta.thisCategories))(n.includes(i.slug)||n.length<1)&&(a.push(i.slug),r=!0)}else r=!0;return!!r&&a}function h(e,t){var a=jQuery("#calendar-container").data();jQuery(".event-count").remove(),setTimeout((function(){Object.keys(e.days).forEach((function(r){var n=0;for(const[a,d]of Object.entries(e.days[r].events)){var i=e.days[r].events[a];p(e.event_objects[i],t)&&n++}var d=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())}(new Date(1e3*r)),o=jQuery('td.fc-day[data-date="'+d+'"]');if(n>0){var s="";"emptyCircle"==a.calendarconfig_eventrendertype&&(s+=" hide-number"),o.addClass("has-event").find(".fc-daygrid-day-frame").prepend('<div class="event-count '+s+'"><span>'+n+"</span></div>")}}))}),100)}function y(e,t){var a=new Date(e.getTime());return a.setDate(e.getDate()+(7+t-e.getDay())%7),a}function w(e={}){var t=jQuery("#calendar-container").data(),r=void 0!==e.callOrigin&&e.callOrigin?e.callOrigin:null,n=void 0!==t.filterconfig_enddatedefault&&t.filterconfig_enddatedefault?t.filterconfig_enddatedefault:"start_date",i=void 0!==t.filterconfig_usedates&&t.filterconfig_usedates?t.filterconfig_usedates:null,o=d({callOrigin:r});if("initial-load"!=r&&r){if(e.start_date)var s=e.start_date;else i?s=jQuery("#StartDate").val():c=a(jQuery("#calendarList").data("start_date"));!c&&s&&(c=a(s))}else var c="undefined"!=typeof eventasticCalendar?eventasticCalendar.getDate():new Date;if("initial-load"!=r&&r){if(e.end_date)var l=e.end_date;else i?("start_date"==n&&(l=jQuery("#StartDate").val()),"one_month"==n&&(l=new Date(c.getFullYear(),c.getMonth()+1,1)),"two_month"==n&&(l=new Date(c.getFullYear(),c.getMonth()+2,1)),"three_month"==n&&(l=new Date(c.getFullYear(),c.getMonth()+3,1))):l=s||c;var g=a(l)}else new Date(c.getFullYear(),c.getMonth()+1,1);return e={start_date:c,end_date:g,calendarConfig_eventRenderType:t.calendarConfig_eventRenderType,layoutStyle:"integrated",renderCalendarEvents:!0},o.length>0&&(e.categories=o),e}jQuery("document").ready((function(e){!function(){var e=jQuery("#calendar-container").data(),t={},a="";void 0!==e.blockconfig_jsoverridenamespace&&e.blockconfig_jsoverridenamespace&&(a=e.blockconfig_jsoverridenamespace),"function"==typeof eventasticOverride&&(window.override=eventasticOverride(a));var d=void 0!==e.calendarconfig_headertoolbarstart&&e.calendarconfig_headertoolbarstart?e.calendarconfig_headertoolbarstart:"title",o=void 0!==e.calendarconfig_headertoolbarcenter&&e.calendarconfig_headertoolbarcenter?e.calendarconfig_headertoolbarcenter:null,g=void 0!==e.calendarconfig_headertoolbarend&&e.calendarconfig_headertoolbarend?e.calendarconfig_headertoolbarend:"prev,next";if("undefined"!=typeof FullCalendar&&((t=new FullCalendar.Calendar(document.getElementById("calendar"),{dayMaxEventRows:3,height:"auto",displayEventTime:!0,headerToolbar:{start:d,center:o,end:g},eventDidMount:function(e){e.el.querySelector(".fc-event-title").textContent=function(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}(e.event.title)}})).render(),window.calendar=t),void 0!==window.preLoadData){var u=function(){var e=jQuery("#calendar-container").data(),t=void 0!==e.filterconfig_enddatedefault&&e.filterconfig_enddatedefault?e.filterconfig_enddatedefault:"start_date";if(void 0!==e.listconfig_initialloaddaterange){if("this_weekend"==e.listconfig_initialloaddaterange){var a=(o=new Date).getDay(),n=3;if(5==a||6==a||7==a){var i=new Date,d=new Date;n=7-a}else i=y(new Date,5),d=y(new Date,5);d.setDate(d.getDate()+n)}"today"==e.listconfig_initialloaddaterange&&(i=new Date,d=new Date),"3_months"==e.listconfig_initialloaddaterange&&(i=new Date,(d=new Date).setMonth(d.getMonth()+3))}if(!i||!d){var o,s=(o=new Date).getFullYear(),c=o.getMonth();i=new Date,d=new Date(s,c+1,0)}if(i.setHours(0,0,0),d.setHours(0,0,0),void 0!==e.filterconfig_usedates&&e.filterconfig_usedates){var l=r({input:i,dateFormat:"Y-M-D"});if(jQuery("#StartDate").val(l),void 0!==e.filterconfig_fillenddateinput&&e.filterconfig_fillenddateinput){if("start_date"==t)var g=r({input:i,dateFormat:"Y-M-D"});"one_month"==t&&(g=new Date(i.getFullYear(),i.getMonth()+1,1)),"two_month"==t&&(g=new Date(i.getFullYear(),i.getMonth()+2,1)),"three_month"==t&&(g=new Date(i.getFullYear(),i.getMonth()+3,1));var u=r({input:g,dateFormat:"Y-M-D"});jQuery("#EndDate").val(u)}else jQuery("#EndDate").val(null)}return{start_date:i,end_date:d}}(),f=u.start_date,m=u.end_date,p={start_date:f,end_date:m,grid_start_date:f,grid_end_date:m};let a=n(window.preLoadData,p);if(void 0!==e.listconfig_initialtitle&&e.listconfig_initialtitle)var D=e.listconfig_initialtitle;else D="Upcoming "+v(f.getMonth())+" Events";if(_(a,{cardconfig_showdate:!0,title:D,start_date:f,end_date:m,grid_start_date:f,grid_end_date:m,date_format:e.cardconfig_dateformat}),"undefined"!=typeof FullCalendar)if("list"==e.calendarconfig_eventrendertype){var b=r({input:u.start_date,dateFormat:"Y-M"});window.preLoadData.monthsEventSourceAdded.push(b),t.addEventSource(window.preLoadData.fullCalendarEventsSource)}else h(window.preLoadData,e);jQuery(".fc-next-button, .fc-prev-button").on("click",{eventasticObject:t},(function(e){var t=j("#calendar-container").data();jQuery("#calendarList, #events-list-title").html("");var a=e.data.eventasticObject.getDate();let n=new Date(a.getFullYear(),a.getMonth()+1,1);var d=r({input:a,dateFormat:"Y-M-D"}),o=r({input:n,dateFormat:"Y-M-D"});c(i({start_date:d,end_date:o,renderCalendarEvents:!0,grid_start_date:d,grid_end_date:o,categories:t.categories?t.categories:[],maxNumberOfGridEventsToPreLoad:void 0!==t.maxnumberofgrideventstopreload&&t.maxnumberofgrideventstopreload>0?t.maxnumberofgrideventstopreload:1e3}))})),s(),jQuery(".eventastic-calendar-block .toggle-buttons button").on("click",(function(e){!function(e){jQuery("#calendar-container .toggle-buttons button").removeClass("active"),e.addClass("active");var t=e.data("target");jQuery(".toggle-target").removeClass("active").removeClass("as-grid").removeClass("as-list"),"grid"==t&&jQuery(".toggle-target.grid-list").addClass("active").addClass("as-grid"),"list"==t&&jQuery(".toggle-target.grid-list").addClass("active").addClass("as-list"),"calendar"==t&&jQuery('.toggle-target[data-target="calendar"]').addClass("active")}(jQuery(e.currentTarget))})),jQuery(".event-category-filter").on("click",(function(e){jQuery(e.currentTarget).toggleClass("active");var t=w({callOrigin:"category-filter"});l(window.preLoadData,t)}));var j=jQuery,M="MM/DD/YYYY",C="YYYY-MM-DD";j("input[type=date].eventasticDatePicker").each((function(){var e={showDropdowns:!1,opens:"right",drops:"down",singleDatePicker:!0,autoUpdateInput:!1,autoApply:!0,locale:{format:M,firstDay:0}};""!=j(this).val()&&(e.startDate=moment(j(this).val()).format(M)),j(this).daterangepicker(e),j(this).on("show.daterangepicker",(function(e,t){if(""!=j(this).val()){var a=moment(j(this).val()).format(M);j(this).data("daterangepicker").setStartDate(a)}})),j(this).on("apply.daterangepicker",(function(e,t){if(j(this).val(t.startDate.format("YYYY-MM-DD")),""!=j(this).val()){var a=j(this),r=t.startDate.format(C),n=!!t.element.attr("id").toLowerCase().indexOf("start");j(this).val(r).trigger("change"),j("input[type=date].eventasticDatePicker").each((function(){if(j(this).get(0)!==a.get(0)){var e=moment(j(this).val()).format(C);if(n&&e>r||!n&&e<r){j(this).val(moment(r).format(C));var t=moment(r).format(M);j(this).data("daterangepicker").setStartDate(t),j(this).data("daterangepicker").setEndDate(t)}}}))}})),j(this).on("cancel.daterangepicker",(function(e,t){j(this).val("").trigger("change")}))}))}else console.log("1180 DO NOT buildEventsGrid");jQuery(".eventFilterSubmit").click((function(){p.callOrigin="submit-search",function(e){e.start_date=jQuery("#StartDate").val(),e.end_date=jQuery("#EndDate").val();var t=i(e=w(e)),a=r({input:e.start_date,dateFormat:"m D"}),n=r({input:e.end_date,dateFormat:"m D"});t.callOrigin="submit-search",t.keyword=jQuery("#Keyword").val(),t.title=a+" to "+n,c(t)}(p)})),jQuery(".resetFilters").click((function(){if(void 0!==e.filterconfig_categoryelementtype)if("select"==e.filterconfig_categoryelementtype){var t=jQuery(".category-filter > option:selected");jQuery.each(t,(function(e,t){jQuery(t).prop("selected",!1)}))}else"checkboxes"==e.filterconfig_categoryelementtype?jQuery(".category-checkbox:checkbox:checked").each((function(e,t){jQuery(t).prop("checked",!1)})):(t=jQuery(".event-category-filter.button.active"),jQuery.each(t,(function(e,t){jQuery(t).removeClass("active")})));p=w(),console.log("XXXXXXXXXXXXfilterargs ::::",p),l(window.preLoadData,p)})),function(){var e=jQuery("#calendar-container").data(),t=new Date,a=r({input:t,dateFormat:"Y-M-D"}),n=r({input:new Date(t.getFullYear(),t.getMonth()+2,0),dateFormat:"Y-M-D"});void 0!==e&&void 0!==e.showpastevents&&e.showpastevents&&(a=r({input:new Date(t.getFullYear(),t.getMonth()-1,1),dateFormat:"Y-M-D"})),c({callOrigin:"initial-load",start_date:a,end_date:n,renderCalendarEvents:!1,categories:e.categories?e.categories:[],maxNumberOfGridEventsToPreLoad:void 0!==e.maxnumberofgrideventstopreload&&e.maxnumberofgrideventstopreload>0?e.maxnumberofgrideventstopreload:1e3})}()}()}))})();